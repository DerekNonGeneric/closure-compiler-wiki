For each compilation, an instance of [Compiler](https://github.com/google/closure-compiler/blob/master/src/com/google/javascript/jscomp/Compiler.java) is created. The compiler class contains several `compile` methods, and they all end up calling [`compileInternal`](https://github.com/google/closure-compiler/search?utf8=%E2%9C%93&q=%22private+void+compileInternal%28%29%22).

The [CommandLineRunner](https://github.com/google/closure-compiler/blob/master/src/com/google/javascript/jscomp/CommandLineRunner.java) takes the command-line arguments and creates an instance of [CompilerOptions](https://github.com/google/closure-compiler/blob/master/src/com/google/javascript/jscomp/CompilerOptions.java). The compiler uses the options object to determine which passes will be run (some checks and some optimizations). This happens in [DefaultPassConfig](https://github.com/google/closure-compiler/blob/master/src/com/google/javascript/jscomp/DefaultPassConfig.java). The two important methods in this class are `getChecks` and `getOptimizations`.

Before running the checks, the compiler parses the code and creates an abstract-syntax tree (AST). The structure of the AST is described in [Node.java](https://github.com/google/closure-compiler/blob/master/src/com/google/javascript/rhino/Node.java) and [Token.java](https://github.com/google/closure-compiler/blob/master/src/com/google/javascript/rhino/Token.java).

[PhaseOptimizer](https://github.com/google/closure-compiler/blob/master/src/com/google/javascript/jscomp/PhaseOptimizer.java) takes the list of passes created in the pass config, and runs them. Running the checks is simple, we just go through the list of checks and run each check once. Some optimization passes run once, and others run in a loop until they can no longer make changes. During an optimization loop, the compiler tries to avoid running passes that are no longer making changes.

